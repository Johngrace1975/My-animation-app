<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TweenCraft - Cinematic Edition</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
    <style>
        :root { --primary: #ff9f43; --purple: #9b59b6; --bg: #0a0a0a; --card: #1e1e1e; --green: #2ecc71; }
        body, html { margin: 0; padding: 0; height: 100%; background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        
        #studio-screen { display: flex; flex-direction: column; height: 100vh; }
        .main-workspace { display: flex; flex-grow: 1; position: relative; }
        
        /* SIDEBAR */
        .side-toolbar { width: 70px; background: #141414; display: flex; flex-direction: column; align-items: center; padding-top: 20px; gap: 15px; border-right: 1px solid #333; }
        .tool-btn { width: 45px; height: 45px; background: #222; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; cursor: pointer; border: 1px solid #444; }

        /* FILTER MENU (New!) */
        .filter-panel { position: absolute; right: 20px; top: 20px; background: rgba(30,30,30,0.95); padding: 15px; border-radius: 15px; display: none; flex-direction: column; gap: 10px; border: 1px solid #444; z-index: 100; }
        .filter-item { background: #333; padding: 10px; border-radius: 8px; cursor: pointer; font-size: 12px; text-align: center; border: 1px solid transparent; }
        .filter-item:hover { border-color: var(--green); }

        #canvas-wrapper { flex-grow: 1; display: flex; align-items: center; justify-content: center; background: #111; }
    </style>
</head>
<body>

    <div id="studio-screen">
        <div class="main-workspace">
            <div class="side-toolbar">
                <div class="tool-btn" onclick="addChar()">ğŸ‘¦</div>
                <div class="tool-btn" style="background:var(--green)" onclick="toggleFilters()">ğŸ¬</div>
                <div class="tool-btn" onclick="location.reload()">ğŸ </div>
            </div>

            <div id="canvas-wrapper">
                <canvas id="mainCanvas"></canvas>
            </div>

            <div class="filter-panel" id="filterPanel">
                <div style="font-size: 11px; color: #888; margin-bottom: 5px;">SCENE FILTERS</div>
                <div class="filter-item" onclick="applyFilter('none')">ğŸš« Reset</div>
                <div class="filter-item" onclick="applyFilter('grayscale')">ğŸ“½ï¸ B&W</div>
                <div class="filter-item" onclick="applyFilter('sepia')">ğŸ“œ Vintage</div>
                <div class="filter-item" onclick="applyFilter('night')">ğŸŒ™ Night</div>
            </div>
        </div>
    </div>

    <script>
        const canvas = new fabric.Canvas('mainCanvas');

        window.onload = () => {
            canvas.setDimensions({ width: 800, height: 450 });
            canvas.backgroundColor = "#222";
        };

        function toggleFilters() {
            const panel = document.getElementById('filterPanel');
            panel.style.display = panel.style.display === 'flex' ? 'none' : 'flex';
        }

        function applyFilter(type) {
            const bg = canvas.backgroundImage;
            if (!bg) return alert("Select a background first!");

            bg.filters = []; // Clear current filters
            
            if (type === 'grayscale') {
                bg.filters.push(new fabric.Image.filters.Grayscale());
            } else if (type === 'sepia') {
                bg.filters.push(new fabric.Image.filters.Sepia());
            } else if (type === 'night') {
                // Night effect using a dark blue tint matrix
                bg.filters.push(new fabric.Image.filters.ColorMatrix({
                    matrix: [
                        0.5, 0, 0, 0, 0,
                        0, 0.5, 0, 0, 0,
                        0, 0, 1, 0, 0,
                        0, 0, 0, 1, 0
                    ]
                }));
            }

            bg.applyFilters();
            canvas.renderAll();
        }

        function addChar() {
            fabric.Image.fromURL('https://cdn-icons-png.flaticon.com/512/4333/4333609.png', img => {
                img.set({ scaleX: 0.4, scaleY: 0.4, left: 100, top: canvas.height, originY: 'bottom' });
                canvas.add(img);
            }, { crossOrigin: 'anonymous' });
        }
    </script>
</body>
</html>
 
